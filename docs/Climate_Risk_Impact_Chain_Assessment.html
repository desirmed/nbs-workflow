<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Climate Risk Impact Chain Assessment</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/main/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>



<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Applied desirmed Framework</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="How_To.html">How to?</a>
</li>
<li>
  <a href="Download_Resources.html">Downloads</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://www.deltares.nl/en" target="_blank">
      <span><img src="https://www.desirmed.eu/theme17/img/logos/6_Deltares.png" alt="Deltares Logo" style="height: 45px; margin-right: 10px;"></span>
    </a>

  <li>
    <a href="https://www.cmcc.it/" target="_blank">
      <span><img src="https://www.desirmed.eu/theme17/img/logos/1_CMCC.png" alt="CMCC Logo" style="height: 45px; margin-right: 10px;"></span>
    </a>
 
  <li>
    <a href="https://www.unist.hr/en" target="_blank">
      <span><img src="https://www.desirmed.eu/theme17/img/logos/11_zupanija.jpg" alt="Split 1 Logo" style="height: 45px; margin-right: 10px;"></span>
    </a>

  <li>
    <a href="https://duth.gr/en/home-english/" target="_blank">
      <span><img src="https://www.desirmed.eu/theme17/img/logos/4_DUTH.png" alt="Duth Logo" style="height: 45px;"></span>
    </a>
  </li>
</ul>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<!-- ====================== changehistory (compact) ====================== -->
<style>
  .changelog-toggle .chev {
    transition: transform 0.2s ease;
    display: inline-block;
    margin-left: 6px;
  }
  .changelog-toggle[aria-expanded="true"] .chev {
    transform: rotate(180deg);
  }
  /* small tidy-ups */
  .changelog-panel .nav-tabs>li>a { padding: 6px 10px; }
  .changelog-panel .tab-content { padding: 10px 0; }
</style>

<p>
  <button type="button"
          class="btn btn-default changelog-toggle"
          data-toggle="collapse"
          data-target="#changehistory-report"
          aria-expanded="false"
          aria-controls="changehistory-report">
    <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
    changehistory
    <span class="glyphicon glyphicon-chevron-down chev" aria-hidden="true"></span>
  </button>
</p>

<div id="changehistory-report" class="collapse changelog-panel">
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#summary">Summary</a></li>
    <li><a data-toggle="tab" href="#versions">Past versions</a></li>
  </ul>

  <div class="tab-content">
    <!-- Summary -->
    <div id="summary" class="tab-pane fade in active">
      <p><strong>Last updated:</strong> 2025-03-23</p>
      <p><strong>Knit directory:</strong> <code>nbs-workflow/</code>
        <span class="glyphicon glyphicon-question-sign"
              title="Local directory where this page was rendered."></span>
      </p>
      <p>
        This page is built with
        <a href="https://rmarkdown.rstudio.com" target="_blank">R&nbsp;Markdown</a> and
        <a href="https://www.rdocumentation.org/packages/workflowr/versions/1.7.1" target="_blank">workflowr&nbsp;1.7.1</a>.
        See <em>Past versions</em> for the development history.
      </p>
      <hr>
    </div>

    <!-- Past versions -->
    <div id="versions" class="tab-pane fade">

      <div class="table-responsive">
        <table class="table table-condensed table-hover">
          <thead>
            <tr>
              <th>File</th><th>Version</th><th>Author</th><th>Date</th><th>Message</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Rmd</td>
              <td><a href="https://github.com/deltares-desirmed/nbs-workflow/blob/7226f266f0d70e428d0ba2ae91c9efa75f9290ab/docs/Mapping_Ecosystem_services.html" target="_blank">7226f26</a></td>
              <td>Desmond Lartey</td>
              <td>2025-03-23</td>
              <td>wflow_publish("analysis/Mapping_Ecosystem_services.html.Rmd")</td>
            </tr>
            <tr>
              <td>html</td>
              <td><a href="https://rawcdn.githack.com/deltares-desirmed/nbs-workflow/76f52cea6899e3efcdc8fb5fb1389210be8d8324/docs/Mapping_Ecosystem_services.html" target="_blank">76f52ce</a></td>
              <td>Desmond Lartey</td>
              <td>2025-03-23</td>
              <td>Build site.</td>
            </tr>
            <tr>
              <td>Rmd</td>
              <td><a href="https://github.com/deltares-desirmed/nbs-workflow/blob/0ce17c3b0a0f4d8d8ba3ef3ab45111635d366004/analysis/Mapping_Ecosystem_services.Rmd" target="_blank">0ce17c3</a></td>
              <td>Desmond Lartey</td>
              <td>2025-03-23</td>
              <td>wflow_publish("analysis/Mapping_Ecosystem_services.html.Rmd")</td>
            </tr>
          </tbody>
        </table>
      </div>
      <hr>
    </div>
  </div>
</div>

<div id="header">



<h1 class="title toc-ignore">Climate Risk Impact Chain Assessment</h1>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
workflowr <span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span
class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2025-01-02
</p>
<p>
<strong>Checks:</strong> <span
class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7
<span class="glyphicon glyphicon-exclamation-sign text-danger"
aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>nbs-workflow/</code> <span
class="glyphicon glyphicon-question-sign" aria-hidden="true"
title="This is the local directory in which the code in this file was executed.">
</span>
</p>
<p>
This reproducible <a href="https://rmarkdown.rstudio.com">R Markdown</a>
analysis was created with <a
  href="https://github.com/workflowr/workflowr">workflowr</a> (version
1.7.1). The <em>Checks</em> tab describes the reproducibility checks
that were applied when the results were created. The <em>Past
versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date
</a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate"
class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git
repository, you know the exact version of the code that produced these
results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the
global environment can affect the analysis in your R Markdown file in
unknown ways. For reproduciblity it’s best to always run the code in an
empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20241223code">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Seed:</strong>
<code>set.seed(20241223)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20241223code"
class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20241223)</code> was run prior to running
the code in the R Markdown file. Setting a seed ensures that any results
that rely on randomness, e.g. subsampling or permutations, are
reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Session information:</strong>
recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded"
class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package
versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be
confident that you successfully produced the results during this
run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr
project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomOhmNpRtutorialtree08ce7dac4af884bae9b15e0269189c19c71f3ac0targetblank08ce7daa">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Repository version:</strong>
<a href="https://github.com/deltares-desirmed/nbs-workflow/tree/08ce7dac4af884bae9b15e0269189c19c71f3ac0" target="_blank">08ce7da</a>
</a>
</p>
</div>
<div
id="strongRepositoryversionstrongahrefhttpsgithubcomOhmNpRtutorialtree08ce7dac4af884bae9b15e0269189c19c71f3ac0targetblank08ce7daa"
class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development
and connecting the code version to the results is critical for
reproducibility.
</p>
<p>
The results in this page were generated with repository version
<a href="https://github.com/deltares-desirmed/nbs-workflow/tree/08ce7dac4af884bae9b15e0269189c19c71f3ac0" target="_blank">08ce7da</a>.
See the <em>Past versions</em> tab to see a history of the changes made
to the R Markdown and HTML files.
</p>
<p>
Note that you need to be careful to ensure that all relevant files for
the analysis have been committed to Git prior to generating the results
(you can use <code>wflow_publish</code> or
<code>wflow_git_commit</code>). workflowr only checks the R Markdown
file, but you know if there are other scripts or data files that it
depends on. Below is the status of the Git repository when the results
were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rhistory
    Ignored:    .Rproj.user/

Untracked files:
    Untracked:  data/raster/reclassified.tif
    Untracked:  data/raster/reclassified.tif.aux.xml

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not
included in this status report because it is ok for generated content to
have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">
<p>
These are the previous versions of the repository in which changes were
made to the R Markdown
(<code>analysis/Climate Risk Impact Chain Assessment.Rmd</code>) and HTML
(<code>docs/Climate Risk Impact Chain Assessment.html</code>) files. If
you’ve configured a remote Git repository (see
<code>?wflow_git_remote</code>), click on the hyperlinks in the table
below to view the files as they were in that past version.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/deltares-desirmed/nbs-workflow/blob/08ce7dac4af884bae9b15e0269189c19c71f3ac0/analysis/Climate Risk Impact Chain Assessment.Rmd" target="_blank">08ce7da</a>
</td>
<td>
Desmond Lartey
</td>
<td>
2025-01-02
</td>
<td>
wflow_publish("analysis/Climate Risk Impact Chain Assessment.Rmd")
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/deltares-desirmed/nbs-workflow/f631618cadb99ba7ff8fd7a29849134d1bd0f320/docs/Climate Risk Impact Chain Assessment.html" target="_blank">f631618</a>
</td>
<td>
Desmond Lartey
</td>
<td>
2025-12-31
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/deltares-desirmed/nbs-workflow/a7faec7833af85aa58733050edf3121b0ad6fcd1/docs/Climate Risk Impact Chain Assessment.html" target="_blank">a7faec7</a>
</td>
<td>
Desmond Lartey
</td>
<td>
2025-02-28
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/deltares-desirmed/nbs-workflow/blob/777eca07a93bbbb58b3af856541abb54eeaa8234/analysis/Climate Risk Impact Chain Assessment.Rmd" target="_blank">777eca0</a>
</td>
<td>
Desmond Lartey
</td>
<td>
2025-02-28
</td>
<td>
wflow_publish("analysis/Climate Risk Impact Chain Assessment.Rmd")
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/deltares-desirmed/nbs-workflow/7d70ba7ace16e6a81aa43c248f06a28f789e920f/docs/Climate Risk Impact Chain Assessment.html" target="_blank">7d70ba7</a>
</td>
<td>
Desmond Lartey
</td>
<td>
2025-02-28
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/deltares-desirmed/nbs-workflow/blob/6c19bd719b4b258b26a60b176e7c79d43fc3d8fb/analysis/Climate Risk Impact Chain Assessment.Rmd" target="_blank">6c19bd7</a>
</td>
<td>
Desmond Lartey
</td>
<td>
2025-02-28
</td>
<td>
wflow_publish("analysis/Climate Risk Impact Chain Assessment.Rmd")
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<style> p { text-align: justify; } </style>


    
    <h2>Understanding Landscape Characterization in DesirMED</h2>
    
    <p> You remeber that In Task 4.1, we went through the process <a href="https://deltares-desirmed.github.io/nbs-workflow/Downloads_and_Geoprocessing.html#Landscape_Archetype_Classification"> of systematically characterizing landscapes</a> into the 3 domains i.e biophysical, socio-economic, and governance. But why do this? Here, we will try to show you how T4.1 could be useful by linking these insights to broader climate resilience-building efforts. Because on the one hand you want to understandd your systems and its components, and on the hand, you want to see how the systems are interelated, services provision, how they are linked to the various risks and how these enhance our understanding of what climate adaptation solutions are necessary.</p>
    
    <h4>More specifically:</h4>
    <ul>
        <li>How do we ensure that <strong>landscapes are not just viewed as static entities</strong>, but rather as <strong>dynamic systems</strong> with interdependent ecological, socio-economic, and governance structures?</li>
        <li>Can we use this <strong>characterization approach we adopted to identify patterns, vulnerabilities, and opportunities for intervention</strong> in climate adaptation strategies?</li>
        <li>What insights can we extract from this LAs to <strong>better support the development and implementation of Nature-based Solutions (NbS)</strong> at different scales?</li>
    </ul>
    
    <p>At its core, <strong>landscape characterization</strong> allows us to go beyond mere classification. It provides a structured approach to:</p>
    <ul>
        <li><strong>Identify and classify distinct landscape archetypes</strong> based on three key domains:</li>
        <ul>
            <li><strong>Biophysical and Ecological Characteristics</strong> (e.g., terrain, vegetation, land cover, land use).</li>
            <li><strong>Socio-Economic Dimensions</strong> (e.g., key community systems, infrastructure, economic activities).</li>
            <li><strong>Governance</strong> (e.g., what structures are there to support climate resilient and adaptation srategies).</li>
        </ul>
    </ul>
    
    <h3>Linking Landscape Characterization to Climate Risk Impact Chain Assessment</h3>
    <p>A fundamental value of the approach we have used lies in its <strong>strong connection to climate risk impact chain assessment</strong>. By combining landscape characterization with <strong>impact chains</strong>, we can:</p>
    <ul>
        <li><strong>Map out interrelations and cascading impacts</strong> between the various landscape domains, environmental hazards, risk exposure, vulnerabilities, and resilience capacity.</li>
        <li><strong>Support the cross-linking of ecosystem services with socio-economic and governance structures</strong>, ensuring that existing natural systems are leveraged for risk reduction and sustainable development.</li>
        <li><strong>Create an evidence-based foundation for NbS implementation and upscaling</strong> across different landscapes.</li>
        <li>Assess how existing ecosystem services (solutions) <strong>support resilience and mitigate cascading risks</strong>.</li>
        <li>Identify which community systems <strong>are at risk and which NbS interventions have the potential to mitigate this risk(s) and address regional needs for </strong> increased climate resilience.</li>
        <li>Provide a structured approach to <strong>guide decision-making in spatial planning, policy, and investment</strong> for resilience-building.</li>
    </ul>
    
    <p class="highlight">This interrelatedness also allows us to critically assess our system—not in isolation but in its complexity. It <strong>moves us beyond fragmented analysis</strong> and enables a more holistic <strong>assessment of our socio-ecological landscape systems</strong>.</p>
    
    <h3>How Should the Final Product Look?</h3>
    <p>While the draft product concept provides a structured approach, we acknowledge that this is <strong>not set in stone</strong>. The methodology must evolve as we integrate expert input and stakeholder feedback. To ensure <strong>practical usability</strong>, we are exploring different final product formats, including:</p>
    <ul>
        <li><strong>A Structured Overarching Table</strong> – A matrix summarizing key landscape archetypes, their risks, ecosystem services, and NbS opportunities for decision-makers to <strong>guide portfolio development and upscaling strategies</strong>. We expect this output to be landscape-specific and not general/generic</li>
        <li><strong>An Interactive Media Documentation</strong> – A more <strong>descriptive and qualitative approach</strong>, combining maps, narratives, and stakeholder feedback to create a <strong>visually rich</strong> and decision-supporting product. We also expect this to be specific per case area</li>
    </ul>
    
    <p><strong>We invite discussions on the approach and the final product.</strong> Could this methodology <strong>enhance our ability to assess and manage landscapes more effectively</strong>? How might we refine it further to <strong>maximize its impact on NbS portfolio development and upscaling</strong>?</p>
    
    <h3>Step-by-Step Integration of Landscape Characterization outputs with Risk Layers</h3>
    <p>Now, we will <strong>systematically integrate</strong> our landscape characterization outputs we created in the previous session with additional datasets for the impact chain. We will add datasets such as:</p>
    <ul>
        <li><strong>Population Distribution</strong> (to assess demographic vulnerabilities and dependencies. This can be enriched with more socioeconomic factors such as critical infrastructures, economic hubs, tourism hubs, etc).</li>
        <li><strong>EUNIS Habitat Data</strong> (to understand the ecological structure and services available in different regions).</li>
        <li><strong>Ecosystems services</strong> (to understand the the services that are already being produced in each of these areas and their respective archetypes. How they are affected and they contribute to resilience).</li>
        <li><strong>Flood Risk Scenarios</strong> (to analyze differential exposure across landscape archetypes, demographics, and socio-economic).</li>
    </ul>
    
    <p>By <strong>layering these datasets</strong>, we will <strong>explore their interrelations, identify gaps, and refine our assessment of resilience and risk reduction opportunities</strong>. This step-by-step integration will provide a clearer picture of how different landscapes characters <strong>respond to hazards and how we can optimize NbS interventions</strong></p>
    
    <p>Let’s now proceed to show an example analysis of what we can make from the outputs of <a href="https://deltares-desirmed.github.io/nbs-workflow/What_is_Landscape_Characterisation.html">T4.1 (Landscape Characterisation).</a></p>
    <p>You can view <a href="https://1drv.ms/p/s!AkeotbAF4WA0wQo6ohkrgn1deYc0?e=g0tEsZ">this presentation file</a> for a better simple overview and scientific literature techniques adopted.<strong> You should NOT download this file</strong> because it content will always be improved with time.</p>
    


    <div class="note" style="background-color: #fcffcc; border-left: 6px solid #ff2600; padding: 15px; margin: 20px 0; font-size: 16px;">
      <strong>ℹ️ Note:</strong> The richness of this impact chain assessment largely depends on the quality of datasets available for the region we used for the Landscape Characterisation exercise, especially on socio-economic and governance aspects. We do not expect biophysical factors to change in mapping.
  </div>

    <p>To show what we can make from Taks 4.1, we will adopt the framework proposed in <a href="https://nbracer.eu/">NBRACER</a></p>

    <h2>Step 1: Define the Spatial and Temporal Context</h2>
    <p>We utilize high-resolution geospatial datasets, including population demographics, landscape archetypes, ecosystem maps, and flood probabilities. This step establishes the geographic scope (landscape archetypes, regions) and assesses the interrelationship between climatic, ecological, and socio-economic factors shaping risk dynamics.</p>

    <h2>Step 2: Determine Hazards and Intermediate Impacts</h2>
    <p>We identify primary climate hazards such as flooding and extreme weather events. The spatial propagation of these hazards across biophysical and infrastructure systems is analyzed to understand their impact and where NbS interventions can be most effective.</p>

    <h2>Step 3: Determine Exposed Elements of the Socio-Ecological and Governance System</h2>
    <p>We identify <strong>Key Critical Sectors (KCS)</strong> at risk, including:</p>
    <ul>
        <li>Natural ecosystems (e.g., wetlands, forests)</li>
        <li>Infrastructure (e.g., roads, water supply, hospitals, urban areas). Note that we mainly use the POI datasets available to use. <a href="https://1drv.ms/p/s!AkeotbAF4WA0wQo6ohkrgn1deYc0?e=g0tEsZ">Check the process in the landscape characterization exercise</a></li>
        <li>Vulnerability and exposure (e.g., per communities, age and sex, population in different years)</li>
    </ul>

    <h2>Step 4: Determine Vulnerability of the Socio-Ecological System</h2>
    <p>We analyze how risks are associated with different landscape archetypes and evaluate <strong>social vulnerabilities</strong> by clustering indicators and identifying governance gaps. Risks are also analyzed in relation to governance and social-economic vulnerabilities, recognizing their interdependency.</p>

    <h2>Step 5: Conduct Spatial Analysis and Quantify Risk</h2>
    <p>We perform statistical summaries and intersection analysis to quantify risk levels across different regions and sectors. Existing ecosystem services are assessed to determine their contributions to resilience, and priority areas for NbS interventions are identified based on ecosystem functionality and exposure.</p>

    <h2>Step 6: Plan Responses and NbS-Based Adaptations</h2>
    <p>The final step involves generating key analysis outputs, including <strong>flood exposure assessments, resilience scores, and ecosystem contributions</strong>. We can then design NbS interventions targeted at mitigating climate risks, integrate governance frameworks for scalability, and establish monitoring mechanisms to track adaptation outcomes.</p>

    <img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/15.gif" alt="Landscape Characterization" style="width: 100%; border-radius: 10px;">  


    <h2>Step 1: Load Required Datasets</h2>
    <p>Before conducting any analysis, we need to <strong>load the necessary datasets</strong> in GEE.</p>
    <ul>
        <li><strong>Settlement Data:</strong> Contains population and demographic information.</li>
        <li><strong>Flood Probability Raster Data:</strong> Represents flood hazard probability at different levels.</li>
        <li><strong>Ecosystem Services Data:</strong> Provides information on environmental functions.</li>
        <li><strong>EUNIS Habitat Classification:</strong> A habitat classification system used for land cover analysis.</li>
        <li><strong>Landscape Archetypes:</strong> Defines land character types based on morphology, vegetation, and land use.</li>
        <li><strong>Point of Interest (POI) Data:</strong> Captures socio-economic infrastructure and service locations.</li>
    </ul>
    
    <pre class="code-block">
    // Load required datasets in GEE
    var settlements = ee.FeatureCollection("projects/ee-desmond/assets/desirmed/settlements_population_with_gender_age");
    var floodsHPRaster = ee.Image("projects/ee-desmond/assets/desirmed/floods_High_Probability_Raster");
    var floodsLPRaster = ee.Image("projects/ee-desmond/assets/desirmed/floods_Low_Probability_Raster");
    var floodsMPRaster = ee.Image("projects/ee-desmond/assets/desirmed/floods_Medium_Probability_Raster");
    var ecosystemServices = ee.Image("projects/ee-desmond/assets/desirmed/Ecosystem_Services_2018_Raster_Asset");
    var eunis = ee.Image("projects/ee-desmond/assets/desirmed/EUNIS_2018_TIFF");
    var archetypes = ee.Image("projects/ee-desmond/assets/desirmed/Archetype_2018_TIF");
    var poiDataset = ee.FeatureCollection('projects/ee-desmond/assets/desirmed/PointOfinterest');
    </pre>
    
    <div style="background-color: #e6f2ff; padding: 15px; border-radius: 5px; border-left: 5px solid #008cba;">
      <strong>Note</strong>
      <p>You can see that some of the datasets we are using for the impact chain assessment are new. <strong>These are already geoprocessed datasets which we dont cover how to make them in the workflow</strong> but we have made them all publicly available for you to use for this workshop.</p>
    </div>

    <ul>
        <li>Ensure that all relevant datasets are loaded for analysis.</li>
        <li>We can then overlay multiple spatial datasets.</li>
        <li>Identify potential exposure and risk patterns.</li>
    </ul>
    
    <h2>Step 2: Calculate Flood Exposure for Each Settlement</h2>
    <p>Now that we have the required datasets, we will calculate the <strong>flood exposure for each settlement</strong>. This involves:</p>
    <ul>
        <li>Overlaying flood hazard rasters with the settlement boundaries.</li>
        <li>Computing the total area affected by floods.</li>
        <li>Storing the flood exposure values as attributes for further analysis.</li>
    </ul>
    
    <pre class="code-block">
    // Function to compute flood exposure for settlements
    function calculateFloodExposure(feature, floodRaster, floodType) {
        var floodArea = floodRaster.reduceRegion({
            reducer: ee.Reducer.sum(),
            geometry: feature.geometry(),
            scale: 30,
            maxPixels: 1e13
        }).get('first'); // Adjust band name if necessary
    
        floodArea = ee.Number(floodArea || 0).multiply(900).divide(1e6); // Convert pixels to km²
        return feature.set(floodType, floodArea);
    }
    
    // Apply function to settlements
    var settlementsWithFloodMetrics = settlements.map(function(feature) {
        feature = calculateFloodExposure(feature, floodsHPRaster, 'Flood_HP_Area_km2');
        feature = calculateFloodExposure(feature, floodsMPRaster, 'Flood_MP_Area_km2');
        feature = calculateFloodExposure(feature, floodsLPRaster, 'Flood_LP_Area_km2');
        return feature;
    });
    </pre>
    
    <ul>
        <li>We use <code>reduceRegion()</code> to sum the flooded area within a settlement boundary.</li>
        <li>The result is converted into square kilometers (km²) for better interpretation.</li>
        <li>We apply this function to <strong>all three flood scenarios</strong> (high, medium, and low probability).</li>
    </ul>
    
    <h2>Next Steps</h2>
    <ul>
        <li>We will now analyze <strong>ecosystem services within flood-prone settlements</strong>.</li>
        <li>Calculate <strong>resilience scores</strong> based on ecosystem coverage and exposure.</li>
        <li>Use <strong>visualization techniques</strong> to map and interpret the results.</li>
    </ul>
    
    <p><strong>➡ Next: Analyzing Ecosystem Services & Mapping Resilience</strong></p>
    
    <h2>Step 3: Analyzing Ecosystem Services</h2>
    <p>Now that we have calculated <strong>flood exposure</strong>, we will analyze <strong>ecosystem services</strong> within these flood-prone areas. Understanding ecosystem services is crucial because:</p>
    <ul>
        <li>They <strong>act as natural flood buffers</strong> (e.g., wetlands absorb excess water).</li>
        <li>They <strong>contribute to climate adaptation</strong> by reducing vulnerabilities.</li>
        <li>They help in designing <strong>Nature-based Solutions (NbS)</strong> for flood risk management.</li>
    </ul>
    
    <h3>Extracting Ecosystem Services for Settlements</h3>
    <p>To compute the <strong>total ecosystem service contribution</strong>, we will:</p>
    <ul>
        <li>Extract <strong>ecosystem service values</strong> for each settlement.</li>
        <li>Aggregate different <strong>ecosystem service areas</strong> within a region.</li>
        <li>Calculate the <strong>proportion of each ecosystem service class</strong>.</li>
    </ul>
    
    <pre class="code-block">
      // Define ecosystem classes and their names
      var ecosystemClasses = [
        21100, 22100, 23100, 31100, 32100, 33100, 42100, 42200,
        51000, 71100, 71220, 72100, 81100, 82100
      ];
      
      var ecosystemServiceNames = {
        21100: 'Arable Land',
        22100: 'Vineyards & Orchards',
        23100: 'Annual Crops',
        31100: 'Broadleaved Forest',
        32100: 'Coniferous Forest',
        33100: 'Mixed Forest',
        42100: 'Semi-Natural Grassland',
        42200: 'Alpine Grassland',
        51000: 'Heathland',
        71100: 'Inland Marshes',
        71220: 'Peat Bogs',
        72100: 'Salt Marshes',
        81100: 'Natural Water Courses',
        82100: 'Natural Lakes'
      };

     // Function to compute ecosystem service contribution for each settlement
  function calculateEcosystemMetrics(feature) {
    var classAreas = ecosystemClasses.reduce(function(dict, classValue) {
      var classArea = ecosystemServices.eq(classValue).reduceRegion({
        reducer: ee.Reducer.sum(),
        geometry: feature.geometry(),
        scale: 30,
        maxPixels: 1e13
      }).get('remapped'); // Ensure the band name matches

      classArea = ee.Number(classArea || 0).multiply(900).divide(1e6); // Convert pixels to km²
      return dict.set(classValue.toString(), classArea);
    }, ee.Dictionary({}));

    // Calculate total ecosystem area
    var totalEcosystemArea = ee.Number(
      classAreas.values().reduce(ee.Reducer.sum()) // Sum of all ecosystem areas
    );

    // Calculate percentages for each class
    var classPercentages = classAreas.map(function(key, value) {
      return ee.Number(value).divide(totalEcosystemArea).multiply(100);
    });

    return feature.set('Ecosystem_Class_Areas', classAreas)
                  .set('Total_Ecosystem_Area_km2', totalEcosystemArea)
                  .set('Ecosystem_Class_Percentages', classPercentages);
  }

  var settlementsWithEcosystemMetrics = settlementsWithFloodMetrics.map(calculateEcosystemMetrics);

  print(settlementsWithEcosystemMetrics)
    </pre>
    
    <ul>
        <li><code>reduceRegion()</code> extracts <strong>specific ecosystem service values</strong> for each settlement.</li>
        <li><code>map()</code> applies this function to <strong>all settlements</strong> in the dataset.</li>
        <li><code>Ecosystem_Class_Percentages</code> helps in <strong>comparing settlements</strong> based on their ecosystem support.</li>
    </ul>
    <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/55.png" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>    
    <p><strong>Next:</strong> We will proceed with <strong>Resilience Scoring and Risk Categorization</strong>.</p>
    <h2>Step 4: Resilience Scoring & Risk Categorization</h2>
    <p>Now that we have both <strong>flood exposure</strong> and <strong>ecosystem service metrics</strong>, we will compute a <strong>Resilience Score</strong> to evaluate the ability of each settlement to cope with floods.</p>
    
    <h3>Compute a Resilience Score - option 1?</h3>
    <h3>Methodology</h3>
    <p>The resilience score for Option 1 is computed using the following formula:</p>
    <pre>
    Resilience Score = Total_Ecosystem_Area / ∑(Flood_HP_Area + Flood_MP_Area + Flood_LP_Area)
    </pre>
    <p>Where:</p>
    <ul>
        <li><strong>Total_Ecosystem_Area</strong>: The total area (km²) covered by ecosystem services in the settlement.</li>
        <li><strong>Flood_HP_Area</strong>: The area (km²) exposed to high-probability flooding.</li>
        <li><strong>Flood_MP_Area</strong>: The area (km²) exposed to medium-probability flooding.</li>
        <li><strong>Flood_LP_Area</strong>: The area (km²) exposed to low-probability flooding.</li>
        <li><strong>∑ (Sum)</strong>: Indicates that we sum the flood exposure values across different probability levels.</li>
    </ul>
    <p>This formula evaluates how much ecological space is available to mitigate flood exposure. A higher resilience score suggests that the settlement has more ecosystem services available relative to its flood exposure, which improves flood resilience.</p>
    
    
    <pre class="code-block">
    // Function to compute resilience score
    var settlementsWithResilience = settlementsWithEcosystemMetrics.map(function(feature) {
      var totalEcosystemArea = ee.Number(feature.get('Total_Ecosystem_Area_km2'));
      var floodHP = ee.Number(feature.get('Flood_HP_Area_km2'));
      var floodMP = ee.Number(feature.get('Flood_MP_Area_km2'));
      var floodLP = ee.Number(feature.get('Flood_LP_Area_km2'));
      var totalFloodExposure = floodHP.add(floodMP).add(floodLP);
    
      var resilienceScore = ee.Algorithms.If(
        totalFloodExposure.neq(0),
        totalEcosystemArea.divide(totalFloodExposure),
        0 // Default resilience score if flood exposure is zero
      );
    
      return feature.set('Resilience_Score1', resilienceScore); //fragementation and ecosytem connectiveity(locational), imporve opiton 2
    });
    </pre>
    
    <ul>
        <li>The <strong>higher the resilience score</strong>, the better the ecosystem coverage compared to flood exposure.</li>
        <li>Settlements with <strong>low resilience scores</strong> will need urgent intervention.</li>
    </ul>
    <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/51.png" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>

        <h3>Resilience Score Option 2 </h3>
        <p>This method calculates a resilience score based on ecosystem contribution and hazard exposure. It integrates ecosystem services and flood risk exposure to estimate resilience levels.</p>
        
        <h3>Methodology</h3>
        <p>The resilience score is computed using the following formula:</p>
        <pre>
        Resilience Score = ( Σ (Ecosystem_Area / Total_Settlement_Area × Weight) / Flood_Exposure_Area ) × 10
        </pre>
        <p>Where:</p>
        <ul>
            <li><strong>Ecosystem_Area</strong>: Area covered by a specific ecosystem class.</li>
            <li><strong>Total_Settlement_Area</strong>: Total area of the settlement.</li>
            <li><strong>Weight</strong>: Importance of the ecosystem in providing resilience.</li>
            <li><strong>Flood_Exposure_Area</strong>: Total flood-prone area (sum of high, medium, and low probability flood areas).</li>
        </ul>
        

        <pre><code>
    function computeResilienceScore(feature) {
      var weightsDict = ee.Dictionary({
        21100: 0.25,  22100: 0.3,  23100: 0.25,  31100: 0.86,  32100: 0.7,
        33100: 0.84,  42100: 0.75,  42200: 0.65,  51000: 0.65,  71100: 0.95,
        71220: 1, 72100: 0.9,  81100: 0.95, 82100: 0.95
      });
    
      var ecosystemAreas = ee.Dictionary(feature.get('Ecosystem_Class_Areas'));
      var totalSettlementArea = ee.Number(feature.geometry().area().divide(1e6)); // Convert to km²
      var validTotalArea = totalSettlementArea.max(1e-6); // Avoid division by zero
    
      var floodHP = ee.Number(feature.get('Flood_HP_Area_km2'));
      var floodMP = ee.Number(feature.get('Flood_MP_Area_km2'));
      var floodLP = ee.Number(feature.get('Flood_LP_Area_km2'));
      var totalFloodExposure = floodHP.add(floodMP).add(floodLP).max(1e-6);
    
      var resilienceScore = ecosystemAreas.map(function(classValue, area) {
        var classNumber = ee.Number.parse(ee.String(classValue));
        var weight = weightsDict.get(classNumber, 0);
        return ee.Number(area).divide(validTotalArea).multiply(ee.Number(weight));
      }).values().reduce(ee.Reducer.sum());
    
      var scaledScore = ee.Number(resilienceScore).divide(totalFloodExposure).multiply(10);
    
      return feature.set({
        'Resilience_Score2': scaledScore,
        'Total_Settlement_Area_km2': totalSettlementArea,
        'Total_Ecosystem_Area_km2': ecosystemAreas.values().reduce(ee.Reducer.sum()),
        'Total_Flood_Exposure_km2': totalFloodExposure,
        'Ecosystem_Areas_Dict': ecosystemAreas
      });
    }
    
    // Apply function to feature collection
    var settlementsWithResilience2 = settlementsWithEcosystemMetrics.map(computeResilienceScore);
    
    // Print results
    print(settlementsWithResilience2.limit(5));
        </code></pre>
        
        <h3>Explanation of the Code</h3>
        <ul>
            <li><strong>weightsDict</strong>: Defines the resilience weight for different ecosystem classes.</li>
            <li><strong>ecosystemAreas</strong>: Retrieves the dictionary of ecosystem areas from the feature.</li>
            <li><strong>totalSettlementArea</strong>: Computes the total settlement area in square kilometers.</li>
            <li><strong>totalFloodExposure</strong>: Sums up flood-prone areas to quantify risk exposure.</li>
            <li><strong>ecosystemAreas.map()</strong>: Loops through each ecosystem class and calculates its contribution.</li>
            <li><strong>resilienceScore</strong>: Aggregates all ecosystem contributions based on their weight.</li>
            <li><strong>scaledScore</strong>: Normalizes the resilience score by dividing it by total flood exposure.</li>
        </ul>
        <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/52.png" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>        
        <h3>Why This is an Enhancement Over Option 1</h3>
        <p>Option 1 simply took the ratio of total ecosystem area to flood exposure area, which does not account for ecosystem diversity or weighting.</p>
        <p>This enhanced option improves upon that by:</p>
        <ul>
            <li>Using ecosystem-specific weights to capture their individual contributions.</li>
            <li>Normalizing the resilience score based on the settlement area and flood exposure.</li>
            <li>Making resilience a function of both hazard exposure and ecosystem services.</li>
        </ul>
        <p> If you consider both **ecosystem weight and flood exposure**, this option provides a more comprehensive understanding of resilience dynamics.</p>

    
    <h3>Step 5: Classify Settlements by Flood Risk</h3>
    <p>We will now classify each settlement into <strong>High, Medium, and Low Flood Risk Categories</strong> based on its total flood exposure.</p>
    
    <pre class="code-block">
    // Function to classify settlements into risk categories
    function classifyFloodRisk(feature) {
        var totalFloodExposure = ee.Number(feature.get('Flood_HP_Area_km2'))
            .add(ee.Number(feature.get('Flood_MP_Area_km2')))
            .add(ee.Number(feature.get('Flood_LP_Area_km2')));
    
        var floodRiskCategory = ee.Algorithms.If(
            totalFloodExposure.gt(10),
            'High',
            ee.Algorithms.If(totalFloodExposure.gt(5), 'Medium', 'Low')
        );
    
        return feature.set('Flood_Risk_Category', floodRiskCategory);
    }
    
    var settlementsWithFloodRisk = settlementsWithResilience.map(classifyFloodRisk);
    </pre>
    
    <ul>
        <li>Settlements with <strong>more than 10 km²</strong> of flood exposure are classified as <strong>High Risk</strong>.</li>
        <li>Settlements between <strong>5–10 km²</strong> of flood exposure are classified as <strong>Medium Risk</strong>.</li>
        <li>Settlements below <strong>5 km²</strong> of flood exposure are classified as <strong>Low Risk</strong>.</li>
    </ul>
    
    <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/53.png" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>

    <h2>Impact Chain Assessment</h2>
    <p>This guide walks you through the **three-step process** of impact assessment using Google Earth Engine (GEE). We'll explore how to analyze **Points of Interest (POIs), Governance & Environmental Data, and Flood Impact Assessment**.</p>

    <h2>Step 1: Analyze Points of Interest (POI) Data</h2>
    <p>We begin by integrating **POI data** into settlement areas to understand the socio-economic infrastructure available in different locations.</p>
    <pre><code>// Load POI dataset
var poiDataset = ee.FeatureCollection('projects/ee-desmond/assets/desirmed/PointOfinterest');

// Process settlements with POI information
var settlementsWithPOI = settlements.map(function(feature) {
    var poiInFeature = poiDataset.filterBounds(feature.geometry());
    var level1Counts = poiInFeature.aggregate_histogram('level1_cat');
    var level2Counts = poiInFeature.aggregate_histogram('level2_cat');
    return feature.set('POI_Level1_Counts', level1Counts)
                  .set('POI_Level2_Counts', level2Counts);
});</code></pre>
    
    
    <ul>
        <li><code>poiDataset.filterBounds(feature.geometry())</code>: Retrieves all **POIs** that fall within the boundaries of each settlement.</li>
        <li><code>aggregate_histogram('level1_cat')</code>: Counts the **number of POIs** in each **Level 1 category**.</li>
        <li><code>aggregate_histogram('level2_cat')</code>: Counts the **number of POIs** in each **Level 2 category**.</li>
    </ul>
 
    <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/55.png" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>

    <h3>Step 2: Governance & Environmental Management Data Integration</h3>
    <p>We integrate additional **governance and environmental datasets** such as **sea outlets, hydro-rivers, and protected areas (Natura2000)**.</p>
    <pre><code>// Load environmental datasets
var seaOutlets = ee.FeatureCollection('projects/ee-desmond/assets/desirmed/seaoutletclip');
var hydroRivers = ee.FeatureCollection('projects/ee-desmond/assets/desirmed/HydroRIVERS_v10_eu_Clip');
var natura2000 = ee.FeatureCollection('projects/ee-desmond/assets/desirmed/naturaclip2000');

// Process settlements with governance data
var settlementsWithGovernance = settlementsWithPOI.map(function(feature) {
    var seaOutletCount = seaOutlets.filterBounds(feature.geometry()).size();
    var riverCount = hydroRivers.filterBounds(feature.geometry()).size();
    var naturaCount = natura2000.filterBounds(feature.geometry()).size();
    var naturaArea = natura2000.filterBounds(feature.geometry()).geometry().area().divide(1e6);
    return feature.set('Sea_Outlet_Count', seaOutletCount)
                  .set('River_Count', riverCount)
                  .set('Natura2000_Count', naturaCount)
                  .set('Natura2000_Area', naturaArea);
});</code></pre>
    
    
    <ul>
        <li><code>filterBounds(feature.geometry())</code>: Selects governance-related features **inside each settlement**.</li>
        <li><code>size()</code>: Counts the **total number** of features (e.g., sea outlets, rivers, Natura2000 sites).</li>
        <li><code>geometry().area().divide(1e6)</code>: Converts the area of protected sites from **square meters to square kilometers**.</li>
    </ul>

    <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/56.png" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>
    <h3>Step 3: Impact Assessment (Flood Exposure, Ecosystem, Archetypes, EUNIS, Population, Age, and Sex)</h3>
    <p>Now we assess the impact of **flood hazards** on different settlements, integrating **demographics, ecosystems, and land classifications**.</p>
    <pre><code>// Load flood datasets
      // Step 3: Impact Assessment (Flood Exposure, Ecosystem, Archetypes, Eunis, Population, age and sex)
      var floodHPDataset = ee.FeatureCollection("projects/ee-desmond/assets/desirmed/floods_HP_2019");
      var floodMPDataset = ee.FeatureCollection("projects/ee-desmond/assets/desirmed/floods_MP_2019");
      var floodLPDataset = ee.FeatureCollection("projects/ee-desmond/assets/desirmed/floods_LP_2019");
      var worldPop = ee.ImageCollection('WorldPop/GP/100m/pop_age_sex');
      
      // General population data for multiple years
      function computeAffectedPopulation(feature, floodDataset, years) {
        var impactedFlood = floodDataset.filterBounds(feature.geometry());
        var popImpacts = {};
        years.forEach(function (year) {
          var yearKey = 'pop_' + year;
          var totalPopulation = feature.get(yearKey);
          var affectedArea = impactedFlood.geometry().area();
          var settlementArea = feature.geometry().area();
          var proportionAffected = ee.Number(affectedArea).divide(settlementArea);
          var affectedPopulation = ee.Number(totalPopulation).multiply(proportionAffected);
          popImpacts[year] = affectedPopulation;
        });
        return ee.Dictionary(popImpacts);
      }
      
      // Define demographic bands
      var demographicBands = worldPop.select([
        'population', 'M_0', 'M_5', 'M_10', 'M_15', 'M_20', 'M_25', 'M_30', 'M_35', 'M_40',
        'M_45', 'M_50', 'M_55', 'M_60', 'M_65', 'M_70', 'M_75', 'M_80',
        'F_0', 'F_5', 'F_10', 'F_15', 'F_20', 'F_25', 'F_30', 'F_35', 'F_40', 'F_45',
        'F_50', 'F_55', 'F_60', 'F_65', 'F_70', 'F_75', 'F_80'
      ]);
      
      // Define computation functions
      function computePopulationImpact(flood, feature) {
        return demographicBands.mean().reduceRegion({
          reducer: ee.Reducer.sum(),
          geometry: flood.geometry().intersection(feature.geometry(), ee.ErrorMargin(1)),
          scale: 100,
          maxPixels: 1e13
        });
      }
      
      function computeEcosystemImpact(flood, feature) {
        return ecosystemServices.reduceRegion({
          reducer: ee.Reducer.frequencyHistogram(),
          geometry: flood.geometry().intersection(feature.geometry(), ee.ErrorMargin(1)),
          scale: 30,
          maxPixels: 1e13
        });
      }
      
      function computeEUNISImpact(flood, feature) {
        return eunis.reduceRegion({
          reducer: ee.Reducer.frequencyHistogram(),
          geometry: flood.geometry().intersection(feature.geometry(), ee.ErrorMargin(1)),
          scale: 30,
          maxPixels: 1e13
        });
      }
      
      function computeArchetypeImpact(flood, feature) {
        return archetypes.reduceRegion({
          reducer: ee.Reducer.frequencyHistogram(),
          geometry: flood.geometry().intersection(feature.geometry(), ee.ErrorMargin(1)),
          scale: 30,
          maxPixels: 1e13
        });
      }
      
      function computePOIImpact(flood, feature) {
        var poiInFlood = poiDataset.filterBounds(flood.geometry().intersection(feature.geometry(), ee.ErrorMargin(1)));
        return poiInFlood.aggregate_histogram('level1_cat');
      }
      
      var years = [2020, 2025, 2030];
      var settlementsWithImpact = settlementsWithGovernance.map(function (feature) {
        var floodHP = floodHPDataset.filterBounds(feature.geometry());
        var floodMP = floodMPDataset.filterBounds(feature.geometry());
        var floodLP = floodLPDataset.filterBounds(feature.geometry());
      
        var floodHPImpact = {
          affectedPopulation: computeAffectedPopulation(feature, floodHPDataset, years),
          population: computePopulationImpact(floodHP, feature),
          ecosystem: computeEcosystemImpact(floodHP, feature),
          eunis: computeEUNISImpact(floodHP, feature),
          archetypes: computeArchetypeImpact(floodHP, feature),
          pois: computePOIImpact(floodHP, feature)
        };
        var floodMPImpact = {
          affectedPopulation: computeAffectedPopulation(feature, floodMPDataset, years),
          population: computePopulationImpact(floodMP, feature),
          ecosystem: computeEcosystemImpact(floodMP, feature),
          eunis: computeEUNISImpact(floodMP, feature),
          archetypes: computeArchetypeImpact(floodMP, feature),
          pois: computePOIImpact(floodMP, feature)
        };
        var floodLPImpact = {
          affectedPopulation: computeAffectedPopulation(feature, floodLPDataset, years),
          population: computePopulationImpact(floodLP, feature),
          ecosystem: computeEcosystemImpact(floodLP, feature),
          eunis: computeEUNISImpact(floodLP, feature),
          archetypes: computeArchetypeImpact(floodLP, feature),
          pois: computePOIImpact(floodLP, feature)
        };
        return feature.set('Flood_HP_Impact', floodHPImpact)
                      .set('Flood_MP_Impact', floodMPImpact)
                      .set('Flood_LP_Impact', floodLPImpact);
      });
      
      Map.addLayer(settlementsWithImpact, {}, 'Settlements with Impact Analysis');
      print('Settlements with Impact Analysis:', settlementsWithImpact);
    </code></pre>
    
    <ul>
        <li><code>floodDataset.filterBounds(feature.geometry())</code>: Extracts **flood-affected areas** within each settlement.</li>
        <li><code>affectedArea = impactedFlood.geometry().area()</code>: Computes the **area of affected regions**.</li>
        <li><code>settlementArea = feature.geometry().area()</code>: Measures the **total area of the settlement**.</li>
        <li><code>proportionAffected = affectedArea.divide(settlementArea)</code>: Determines **how much of the settlement is affected**.</li>
        <li><code>affectedPopulation = totalPopulation.multiply(proportionAffected)</code>: Estimates **the number of affected people**.</li>
    </ul>
    <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/57.png" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>

    <p> We have integrated **spatial, demographic, and environmental data** to assess flood risk and how it relates to the various landscape characters.</p>
    <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/crics1.gif" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>


    
    <p>We have now:</p>
    <ul>
        <li>Loaded and analyzed flood exposure across settlements.</li>
        <li>Computed the role of ecosystem services in buffering flood risks.</li>
        <li>Assigned resilience scores to settlements.</li>
        <li>Classified settlements into <strong>High, Medium, and Low Risk</strong> zones per the 3 domains.</li>
        <li>Visualized the results</li>
        <p style="border-left: 5px solid #ccc; padding-left: 10px;"><img src="https://raw.githubusercontent.com/deltares-desirmed/nbs-workflow/main/img/crics2.gif" alt="Inspecting Data in QGIS" style="display: block; margin: auto;" /></p>

    </ul>
    
<p>You can explore the <strong> engine app</strong>  with vSisualised layers <a href="https://desirmed.projects.earthengine.app/view/impact-chain-assessment"> here</a> </p>

        
<div class="giscus"></div>                                         
<script src="https://giscus.app/client.js"
        data-repo="deltares-desirmed/nbs-workflow"
        data-repo-id="R_kgDONtj5VQ"
        data-category="Announcements"
        data-category-id="DIC_kwDONtj5Vc4CmuiS"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>

<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
https://docs.mathjax.org/en/latest/web/configuration.html. This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>




</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
